<map version="0.9.0">
<!-- To view this file, download free mind mapping software FreeMind from http://freemind.sourceforge.net -->
<node CREATED="1336531923712" ID="ID_830750313" MODIFIED="1349197051039" STYLE="bubble" TEXT="Concurrent&#xa;tomxue0126@gmail.com">
<icon BUILTIN="gohome"/>
<node CREATED="1336532127651" ID="ID_753777914" MODIFIED="1355416756595" POSITION="left" TEXT="spinlock" VSHIFT="-22">
<icon BUILTIN="idea"/>
<node CREATED="1349186622034" ID="ID_1988935460" MODIFIED="1349186625112" TEXT="&#x7279;&#x70b9;">
<node CREATED="1349186547274" ID="ID_180782758" MODIFIED="1349187245543" TEXT="&#x81ea;&#x65cb;&#x9501;&#x4e0d;&#x4f1a;&#x5f15;&#x8d77;&#x8c03;&#x7528;&#x8005;&#x7761;&#x7720;">
<icon BUILTIN="full-1"/>
</node>
<node CREATED="1349177585241" ID="ID_479663526" MODIFIED="1349177593709" TEXT="&#x5fd9;&#x7b49;&#x5f85;"/>
<node CREATED="1349187181558" ID="ID_76195031" MODIFIED="1349187279886" TEXT="&#x4e92;&#x65a5;&#x7684;&#xff0c;&#x540c;&#x4e00;&#x65f6;&#x523b;&#x53ea;&#x80fd;&#x6709;&#x4e00;&#x4e2a;&#xa;&#x5185;&#x6838;&#x63a7;&#x5236;&#x8def;&#x5f84;&#x62e5;&#x6709;&#x81ea;&#x65cb;&#x9501;">
<icon BUILTIN="full-2"/>
</node>
<node CREATED="1349250061794" ID="ID_976856699" MODIFIED="1349250067505" TEXT="&#x4e24;&#x4e2a;&#x72b6;&#x6001;">
<node CREATED="1349250068730" ID="ID_191601827" MODIFIED="1349250070899" TEXT="locked"/>
<node CREATED="1349250073218" ID="ID_1841729547" MODIFIED="1349250075059" TEXT="unlocked"/>
</node>
</node>
<node CREATED="1349188041479" ID="ID_1255079805" MODIFIED="1349188043461" TEXT="&#x6548;&#x7387;">
<node CREATED="1349177576273" ID="ID_1586242001" MODIFIED="1369410571085" TEXT="&#x56e0;&#x4e3a;&#x81ea;&#x65cb;&#x9501;&#x4e0d;&#x4f1a;&#x5f15;&#x8d77;&#x8c03;&#x7528;&#x8005;&#x7761;&#x7720;&#xff0c;&#xa;&#x6240;&#x4ee5;&#x81ea;&#x65cb;&#x9501;&#x7684;&#x6548;&#x7387;&#x8fdc;&#x9ad8;&#x4e8e;&#x4e92;&#x65a5;&#x9501;"/>
</node>
<node CREATED="1349186637794" ID="ID_1228939001" MODIFIED="1349186644283" TEXT="&#x9002;&#x7528;&#x60c5;&#x51b5;">
<node CREATED="1349177561138" ID="ID_1938071301" MODIFIED="1349249773386" TEXT="&#x81ea;&#x65cb;&#x9501;&#x9002;&#x5408;&#x4e8e;&#x4fdd;&#x6301;&#x65f6;&#x95f4;&#x975e;&#x5e38;&#x77ed;&#x7684;&#x60c5;&#x51b5;&#xff0c;&#xa;&#x5b83;&#x53ef;&#x4ee5;&#x5728;&#x4efb;&#x4f55;&#x4e0a;&#x4e0b;&#x6587;&#x4f7f;&#x7528;">
<icon BUILTIN="full-3"/>
<node CREATED="1349186865680" ID="ID_196068409" MODIFIED="1349186890406" TEXT="&#x5982;&#x679c;&#x88ab;&#x4fdd;&#x62a4;&#x7684;&#x5171;&#x4eab;&#x8d44;&#x6e90;&#x9700;&#x8981;&#x5728;&#x4e2d;&#x65ad;&#x4e0a;&#x4e0b;&#x6587;&#x8bbf;&#x95ee;&#xa;&#xff08;&#x5305;&#x62ec;Bottom Half&#xff09;&#xff0c;&#x5c31;&#x5fc5;&#x987b;&#x4f7f;&#x7528;&#x81ea;&#x65cb;&#x9501;"/>
</node>
<node BACKGROUND_COLOR="#99ff99" CREATED="1349186961064" ID="ID_132620084" MODIFIED="1352711064678" TEXT="&#x591a;&#x5904;&#x7406;&#x5668;&#xff1a;&#x9700;&#x8981;">
<node CREATED="1349186923679" ID="ID_703813823" MODIFIED="1349186925834" TEXT="&#x81ea;&#x65cb;&#x9501;&#x662f;&#x4e13;&#x4e3a;&#x9632;&#x6b62;&#x591a;&#x5904;&#x7406;&#x5668;&#x5e76;&#x53d1;&#x800c;&#x5f15;&#x5165;&#x7684;&#x4e00;&#x79cd;&#x9501;"/>
<node CREATED="1355490468949" ID="ID_1801777035" MODIFIED="1355490473453" TEXT="&#x539f;&#x7406;">
<node BACKGROUND_COLOR="#ffff33" CREATED="1355490455221" ID="ID_623453129" MODIFIED="1369411262065" TEXT="&#x5b83;&#x7684;&#x5b9e;&#x73b0;&#x662f;&#x57fa;&#x4e8e;CPU&#x9501;&#x5b9a;&#x6570;&#x636e;&#x603b;&#x7ebf;&#x7684;&#x6307;&#x4ee4;"/>
</node>
</node>
<node BACKGROUND_COLOR="#99ff99" CREATED="1349186969639" ID="ID_1661687395" MODIFIED="1352710587712" TEXT="&#x5355;&#x5904;&#x7406;&#x5668;&#xff1a;&#x4e0d;&#x9700;&#x8981;">
<node CREATED="1349186982471" ID="ID_473225572" MODIFIED="1349186993783" TEXT="&#x9632;&#x6b62;&#x4e2d;&#x65ad;&#x5904;&#x7406;&#x4e2d;&#x7684;&#x5e76;&#x53d1;&#x53ef;&#x7b80;&#x5355;&#x91c7;&#x7528;&#xa;&#x5173;&#x95ed;&#x4e2d;&#x65ad;&#x7684;&#x65b9;&#x5f0f;&#xff0c;&#x4e0d;&#x9700;&#x8981;&#x81ea;&#x65cb;&#x9501;"/>
<node CREATED="1349249962164" ID="ID_476123484" MODIFIED="1349249963540" TEXT="&#x5728;&#x5355;&#x5904;&#x7406;&#x5668;&#x4e0a;&#xff0c;&#x7f16;&#x8bd1;&#x7684;&#x65f6;&#x5019;&#x4e0d;&#x4f1a;&#x52a0;&#x5165;&#x81ea;&#x65cb;&#x9501;"/>
</node>
<node CREATED="1349250002987" ID="ID_1061186913" MODIFIED="1349250008736" TEXT="&#x88ab;&#x81ea;&#x65cb;&#x9501;&#x6240;&#x4fdd;&#x62a4;&#x7684;&quot;&#x4e34;&#x754c;&#x4ee3;&#x7801;&quot;&#x4e00;&#x822c;&#x90fd;&#x6bd4;&#x8f83;&#x77ed;&#xff0c;&#xa;&#x5426;&#x5219;&#x5c31;&#x4f1a;&#x6d6a;&#x8d39;&#x8fc7;&#x591a;&#x7684;CPU&#x8d44;&#x6e90;"/>
</node>
<node CREATED="1349187090263" ID="ID_680519864" MODIFIED="1349187092708" TEXT="API">
<node CREATED="1349250189330" ID="ID_399425140" MODIFIED="1349250203359" TEXT="&#x52a8;&#x6001;&#x521d;&#x59cb;&#x5316;&#xff1a;&#xa;spin_lock_init(x)"/>
<node CREATED="1349187450356" ID="ID_1297687916" MODIFIED="1349187886390" TEXT="&#x975e;&#x963b;&#x585e;&#xff1a;&#xa;spin_trylock(lock)&#xa;spin_unlock(lock)"/>
<node CREATED="1349187488524" ID="ID_269441782" MODIFIED="1349250273446" TEXT="&#x963b;&#x585e;&#xff1a;&#xa;spin_lock(lock)&#xa;spin_unlock_wait(lock)"/>
<node CREATED="1349187095318" ID="ID_337629917" MODIFIED="1349250317663" TEXT="&#x5931;&#x6548;&#x672c;&#x5730;&#x4e2d;&#x65ad;&#xa;spin_lock_irq()&#xa;spin_lock_irqsave()"/>
<node CREATED="1349187593467" ID="ID_361551080" MODIFIED="1349187856959" TEXT="&#x5931;&#x6548;&#x672c;&#x5730;&#x8f6f;&#x4e2d;&#x65ad;(&#x4e0d;&#x5931;&#x6548;&#x786c;&#x4e2d;&#x65ad;)&#xa;spin_lock_bh(lock)&#xa;spin_unlock_bh(lock)">
<node CREATED="1349187686306" ID="ID_885558110" MODIFIED="1349187716487" TEXT="&#x539f;&#x56e0;&#xff1a;BH&#x53ef;&#x4ee5;&#x62a2;&#x5360;&#x8fdb;&#x7a0b;&#x4e0a;&#x4e0b;&#x6587;&#x4e2d;&#x7684;&#x4ee3;&#x7801;"/>
</node>
</node>
<node CREATED="1349194472690" ID="ID_725710739" MODIFIED="1349250778416" TEXT="&#x6ce8;&#x610f;">
<icon BUILTIN="info"/>
<node CREATED="1349194481547" ID="ID_245109462" MODIFIED="1349262646993" TEXT="&#x8fdb;&#x7a0b;A&#x5f97;&#x5230;&#x81ea;&#x65cb;&#x9501;&#x4ee5;&#x540e;&#xa;&#x5982;&#x679c;&#x7761;&#x7720;&#x4f1a;&#x9020;&#x6210;&#x6b7b;&#x9501;">
<node CREATED="1349250791445" ID="ID_1857038652" MODIFIED="1349250880351" TEXT="&#x8fdb;&#x7a0b;B&#x5728;CPU&#x4e0a;&#x8fd0;&#x884c;&#xff0c;&#x5b83;&#x4e5f;&#x9700;&#x8981;&#x5f97;&#x5230;A&#x6240;&#x6301;&#x6709;&#x7684;&#x81ea;&#x65cb;&#x9501;&#xff0c;&#x4e8e;&#x662f;&#x5b83;&#xa;&#x5c31;&#x4e00;&#x76f4;&#x81ea;&#x65cb;&#x7b49;&#x5f85;&#x3002;&#x4f46;&#x662f;&#x7531;&#x4e8e;B&#x53ef;&#x80fd;&#x662f;&#x4e00;&#x4e2a;&#x4f18;&#x5148;&#x7ea7;&#x5f88;&#x9ad8;&#x7684;&#x5b9e;&#x65f6;&#x8fdb;&#x7a0b;&#xff0c;&#xa;&#x53ea;&#x8981;&#x5b83;&#x4e0d;&#x7761;&#x7720;&#xff0c;A&#x5c31;&#x7b97;&#x88ab;&#x5524;&#x9192;&#xff0c;&#x4e5f;&#x4e0d;&#x80fd;&#x88ab;&#x8c03;&#x5ea6;&#x8fd0;&#x884c;">
<icon BUILTIN="full-1"/>
</node>
<node CREATED="1349250414599" ID="ID_965582145" MODIFIED="1349250883957" TEXT="&#x67d0;&#x4e2d;&#x65ad;&#x4e0a;&#x4e0b;&#x6587;&#xff0c;&#x5b83;&#x4e5f;&#x9700;&#x8981;&#x5f97;&#x5230;A&#x6240;&#x6301;&#x6709;&#x7684;&#x81ea;&#x65cb;&#x9501;&#xff0c;&#x4e8e;&#x662f;&#x5b83;&#x5c31;&#xa;&#x4e00;&#x76f4;&#x81ea;&#x65cb;&#x7b49;&#x5f85;&#x3002;&#x7531;&#x4e8e;&#x4e2d;&#x65ad;&#x4e0a;&#x4e0b;&#x6587;&#x5728;&#x5176;&#x7ed3;&#x675f;&#x4e4b;&#x524d;&#x662f;&#x4e0d;&#x4f1a;&#x8ba9;&#x51fa;&#xa;CPU&#x7684;&#xff0c;A&#x5c31;&#x7b97;&#x88ab;&#x5524;&#x9192;&#xff0c;&#x4e5f;&#x4e0d;&#x80fd;&#x88ab;&#x8c03;&#x5ea6;&#x8fd0;&#x884c;">
<icon BUILTIN="full-2"/>
</node>
<node CREATED="1349250853909" ID="ID_337869704" MODIFIED="1349250887950" TEXT="&#x8fdb;&#x7a0b;A&#x53ef;&#x80fd;&#x9700;&#x8981;&#x88ab;&#x8fdb;&#x7a0b;B&#x5524;&#x9192;&#xff0c;&#x6216;&#x8005;&#x88ab;&#x67d0;&#x4e2a;&#x4e2d;&#x65ad;&#x4e0a;&#x4e0b;&#x6587;&#x5524;&#x9192;&#xff0c;&#xa;&#x4f46;&#x662f;&#x5b83;&#x4eec;&#x90fd;&#x9700;&#x8981;&#x5f97;&#x5230;A&#x6240;&#x6301;&#x6709;&#x7684;&#x81ea;&#x65cb;&#x9501;">
<icon BUILTIN="full-3"/>
</node>
</node>
</node>
</node>
<node CREATED="1336532144924" ID="ID_1225196485" MODIFIED="1349238308654" POSITION="right" TEXT="rwlock">
<icon BUILTIN="idea"/>
<node CREATED="1349192154139" ID="ID_315859081" MODIFIED="1349192155785" TEXT="&#x7279;&#x70b9;">
<node CREATED="1349192158667" HGAP="26" ID="ID_41403032" MODIFIED="1355757484352" TEXT="&#x4e00;&#x6b21;&#x53ea;&#x6709;&#x4e00;&#x4e2a;&#x7ebf;&#x7a0b;&#x53ef;&#x4ee5;&#x5360;&#x6709;&#x5199;&#x6a21;&#x5f0f;&#x7684;&#x8bfb;&#x5199;&#x9501;&#xff0c;&#xa;&#x4f46;&#x662f;&#x53ef;&#x4ee5;&#x6709;&#x591a;&#x4e2a;&#x7ebf;&#x7a0b;&#x540c;&#x65f6;&#x5360;&#x6709;&#x8bfb;&#x6a21;&#x5f0f;&#x7684;&#x8bfb;&#x5199;&#x9501;" VSHIFT="-21">
<node CREATED="1349259867343" ID="ID_1290794194" MODIFIED="1349259871577" TEXT="&#x5199;&#x52a0;&#x9501;">
<node CREATED="1349259841511" ID="ID_726798403" MODIFIED="1349259855760" TEXT="&#x5f53;&#x8bfb;&#x5199;&#x9501;&#x662f;&#x5199;&#x52a0;&#x9501;&#x72b6;&#x6001;&#x65f6;&#xff0c;&#x5728;&#x8fd9;&#x4e2a;&#x9501;&#x88ab;&#x89e3;&#x9501;&#x4e4b;&#x524d;&#xff0c;&#xa;&#x6240;&#x6709;&#x8bd5;&#x56fe;&#x5bf9;&#x8fd9;&#x4e2a;&#x9501;&#x52a0;&#x9501;&#x7684;&#x7ebf;&#x7a0b;&#x90fd;&#x4f1a;&#x88ab;&#x963b;&#x585e;"/>
</node>
<node CREATED="1349259877839" ID="ID_39050336" MODIFIED="1349259884519" TEXT="&#x8bfb;&#x52a0;&#x9501;">
<node CREATED="1349192328466" ID="ID_1957166510" MODIFIED="1349259977276" TEXT="&#x5f53;&#x8bfb;&#x5199;&#x9501;&#x5728;&#x8bfb;&#x52a0;&#x9501;&#x72b6;&#x6001;&#x65f6;&#xff0c;&#x6240;&#x6709;&#x8bd5;&#x56fe;&#x4ee5;&#x8bfb;&#x6a21;&#x5f0f;&#x5bf9;&#x5b83;&#x8fdb;&#x884c;&#x52a0;&#x9501;&#x7684;&#x7ebf;&#x7a0b;&#x90fd;&#x53ef;&#x4ee5;&#x5f97;&#x5230;&#x8bbf;&#x95ee;&#x6743;&#xff0c;&#xa;&#x4f46;&#x662f;&#x5982;&#x679c;&#x7ebf;&#x7a0b;A&#x5e0c;&#x671b;&#x4ee5;&#x5199;&#x6a21;&#x5f0f;&#x5bf9;&#x6b64;&#x9501;&#x8fdb;&#x884c;&#x52a0;&#x9501;...">
<node CREATED="1349259979542" ID="ID_1163184317" MODIFIED="1349259989326" TEXT="A&#x5fc5;&#x987b;&#x963b;&#x585e;&#x76f4;&#x5230;&#x6240;&#x6709;&#x7684;&#x7ebf;&#x7a0b;&#x91ca;&#x653e;&#x9501;"/>
<node CREATED="1349192252018" ID="ID_1450946847" MODIFIED="1349260021219" TEXT="&#x8bfb;&#x5199;&#x9501;&#x901a;&#x5e38;&#x4f1a;&#x963b;&#x585e;&#x968f;&#x540e;&#x7684;&#x8bfb;&#x6a21;&#x5f0f;&#x9501;&#x8bf7;&#x6c42;&#xff0c;&#x8fd9;&#x6837;&#x53ef;&#x4ee5;&#x907f;&#x514d;&#xa;&#x8bfb;&#x6a21;&#x5f0f;&#x9501;&#x957f;&#x671f;&#x5360;&#x7528;&#xff0c;&#x800c;&#x7b49;&#x5f85;&#x7684;&#x5199;&#x6a21;&#x5f0f;&#x9501;&#x8bf7;&#x6c42;&#x957f;&#x671f;&#x963b;&#x585e;"/>
</node>
</node>
</node>
<node CREATED="1349192110915" HGAP="29" ID="ID_308283061" MODIFIED="1355757489149" TEXT="&#x66f4;&#x9ad8;&#x7684;&#x5e76;&#x884c;&#x6027;" VSHIFT="-7">
<node CREATED="1349192115353" ID="ID_635863005" MODIFIED="1349192134444" TEXT="&#x539f;&#x56e0;&#xff1a;&#x8bfb;&#x5199;&#x9501;&#x6709;3&#x79cd;&#x72b6;&#x6001;"/>
</node>
</node>
<node CREATED="1349192370161" ID="ID_1091625684" MODIFIED="1349192374135" TEXT="&#x9002;&#x7528;&#x60c5;&#x51b5;">
<node CREATED="1349192376817" ID="ID_613998243" MODIFIED="1349192378462" TEXT="&#x8bfb;&#x5199;&#x9501;&#x9002;&#x5408;&#x4e8e;&#x5bf9;&#x6570;&#x636e;&#x7ed3;&#x6784;&#x7684;&#x8bfb;&#x6b21;&#x6570;&#x6bd4;&#x5199;&#x6b21;&#x6570;&#x591a;&#x5f97;&#x591a;&#x7684;&#x60c5;&#x51b5;">
<node CREATED="1349192387169" ID="ID_1602260671" MODIFIED="1349260083206" TEXT="&#x539f;&#x56e0;&#xff1a;&#xa;&#x8bfb;&#x6a21;&#x5f0f;&#x9501;&#x5b9a;&#x65f6;&#x53ef;&#x4ee5;&#x5171;&#x4eab;&#xff0c;&#x4ee5;&#x5199;&#x6a21;&#x5f0f;&#x9501;&#x4f4f;&#x65f6;&#x610f;&#x5473;&#x7740;&#x72ec;&#x5360;&#x3002;&#xa;&#x6240;&#x4ee5;&#x8bfb;&#x5199;&#x9501;&#x53c8;&#x53eb;&#x5171;&#x4eab;-&#x72ec;&#x5360;&#x9501;">
<icon BUILTIN="prepare"/>
</node>
</node>
</node>
<node CREATED="1349192465592" ID="ID_1964794601" MODIFIED="1349192467207" TEXT="API">
<node CREATED="1349192468657" ID="ID_720341235" MODIFIED="1349192478702" TEXT="&#x963b;&#x585e;&#xff1a;&#xa;int pthread_rwlock_rdlock(pthread_rwlock_t *rwlock);&#xa;int pthread_rwlock_wrlock(pthread_rwlock_t *rwlock);&#xa;int pthread_rwlock_unlock(pthread_rwlock_t *rwlock);"/>
<node CREATED="1349192481280" ID="ID_25128502" MODIFIED="1349192493102" TEXT="&#x975e;&#x963b;&#x585e;&#xff1a;&#xa;int pthread_rwlock_tryrdlock(pthread_rwlock_t *rwlock);&#xa;int pthread_rwlock_trywrlock(pthread_rwlock_t *rwlock);"/>
<node CREATED="1349260110317" ID="ID_426326550" MODIFIED="1349260113533" TEXT="&#x521d;&#x59cb;&#x5316;">
<node CREATED="1349260115597" ID="ID_1355007075" MODIFIED="1349260118119" TEXT="pthread_rwlock_init()"/>
</node>
<node CREATED="1349260120421" ID="ID_1783501076" MODIFIED="1349260123647" TEXT="&#x9500;&#x6bc1;">
<node CREATED="1349260129813" ID="ID_17673951" MODIFIED="1349260133646" TEXT="pthread_rwlock_destroy()"/>
</node>
</node>
<node CREATED="1336532162844" HGAP="22" ID="ID_1049690634" MODIFIED="1349238301477" TEXT="RCU" VSHIFT="16">
<icon BUILTIN="idea"/>
<node CREATED="1349194472690" ID="ID_1200494303" MODIFIED="1349194567657" TEXT="&#x524d;&#x63d0;">
<icon BUILTIN="info"/>
<node CREATED="1349194481547" ID="ID_1502436407" MODIFIED="1349194482299" TEXT="&#x8bfb;&#x8005;&#x5728;&#x8bbf;&#x95ee;&#x88ab;RCU&#x4fdd;&#x62a4;&#x7684;&#x5171;&#x4eab;&#x6570;&#x636e;&#x671f;&#x95f4;&#x4e0d;&#x80fd;&#x88ab;&#x963b;&#x585e;"/>
</node>
<node CREATED="1349261771849" ID="ID_195348726" MODIFIED="1349261775986" TEXT="&#x7279;&#x70b9;">
<node CREATED="1349193714848" ID="ID_1579524677" MODIFIED="1349262519027" TEXT="&#x8bfb;&#x8005;&#xff1a;&#xa;&#x4e0d;&#x9700;&#x8981;&#x83b7;&#x5f97;&#x4efb;&#x4f55;&#x9501;&#x5c31;&#x53ef;&#x4ee5;&#x8bbf;&#x95ee;&#x5b83;">
<node CREATED="1349193824759" ID="ID_647098340" MODIFIED="1349262140068" TEXT="&#x4f18;&#x70b9;">
<node CREATED="1349262214999" ID="ID_919003882" MODIFIED="1349262229603" TEXT="&#x5f00;&#x9500;">
<node CREATED="1349194408746" ID="ID_1828408065" MODIFIED="1349261954798" TEXT="&#x8bfb;&#x8005;&#x6ca1;&#x6709;&#x4efb;&#x4f55;&#x540c;&#x6b65;&#x5f00;&#x9500;">
<node CREATED="1349262141622" ID="ID_335600289" MODIFIED="1349262311571" TEXT="&#x5b83;&#x4e0d;&#x9700;&#x8981;&#x9501;&#xff0c;&#x4e0d;&#x4f7f;&#x7528;&#x539f;&#x5b50;&#x6307;&#x4ee4;&#xff1b;&#x800c;&#x4e14;&#x5728;&#x9664; alpha&#x7684;&#xa;&#x6240;&#x6709;&#x67b6;&#x6784;&#x4e0a;&#x4e5f;&#x4e0d;&#x9700;&#x8981;&#x5185;&#x5b58;&#x6805;&#xff08;Memory Barrier&#xff09;"/>
</node>
</node>
</node>
<node CREATED="1349194041974" ID="ID_1445161966" MODIFIED="1349262432965" TEXT="&#x5982;&#x4f55;&#x540c;&#x6b65;&#x5199;&#x8005;">
<icon BUILTIN="help"/>
<node CREATED="1349194120597" ID="ID_85583354" MODIFIED="1349262454715" TEXT="&#x4fe1;&#x53f7;">
<node CREATED="1349262456468" ID="ID_562802930" MODIFIED="1349262469258" TEXT="&#x8bfb;&#x8005;&#x5fc5;&#x987b;&#x63d0;&#x4f9b;&#x4e00;&#x4e2a;&#x4fe1;&#x53f7;&#x7ed9;&#x5199;&#x8005;&#x4ee5;&#x4fbf;&#x5199;&#x8005;&#x80fd;&#x591f;&#xa;&#x786e;&#x5b9a;&#x6570;&#x636e;&#x53ef;&#x4ee5;&#x88ab;&#x5b89;&#x5168;&#x5730;&#x91ca;&#x653e;&#x6216;&#x4fee;&#x6539;&#x7684;&#x65f6;&#x673a;&#x3002;"/>
</node>
<node CREATED="1349194097125" ID="ID_546062281" MODIFIED="1349262476163" TEXT="&#x5783;&#x573e;&#x6536;&#x96c6;&#x5668;">
<node CREATED="1349262477709" HGAP="22" ID="ID_826567374" MODIFIED="1369413356500" TEXT="&#x6709;&#x4e00;&#x4e2a;&#x4e13;&#x95e8;&#x7684;&#x5783;&#x573e;&#x6536;&#x96c6;&#x5668;&#x6765;&#x63a2;&#x6d4b;&#x8bfb;&#x8005;&#x7684;&#x4fe1;&#x53f7;&#xff0c;&#xa;&#x4e00;&#x65e6;&#x6240;&#x6709;&#x7684;&#x8bfb;&#x8005;&#x90fd;&#x5df2;&#x7ecf;&#x53d1;&#x9001;&#x4fe1;&#x53f7;&#x544a;&#x77e5;&#x5b83;&#x4eec;&#x90fd;&#x4e0d;&#x5728;&#x4f7f;&#x7528;&#xa;&#x88ab;RCU&#x4fdd;&#x62a4; &#x7684;&#x6570;&#x636e;&#x7ed3;&#x6784;&#xff0c;&#x5783;&#x573e;&#x6536;&#x96c6;&#x5668;&#x5c31;&#x8c03;&#x7528;&#x56de;&#x8c03;&#x51fd;&#x6570;&#xa;&#x5b8c;&#x6210;&#x6700;&#x540e;&#x7684;&#x6570;&#x636e;&#x91ca;&#x653e;&#x6216;&#x4fee;&#x6539;&#x64cd;&#x4f5c;" VSHIFT="8"/>
</node>
</node>
</node>
<node CREATED="1349193727912" ID="ID_1197391417" MODIFIED="1349262526201" TEXT="&#x5199;&#x8005;&#xff1a;&#xa;&#x5728;&#x8bbf;&#x95ee;&#x5b83;&#x65f6;&#x9996;&#x5148;&#x62f7;&#x8d1d;&#x4e00;&#x4e2a;&#x526f;&#x672c;&#xff0c;&#x7136;&#x540e;&#x5bf9;&#x526f;&#x672c;&#x8fdb;&#x884c;&#x4fee;&#x6539;&#xff0c;&#xa;&#x6700;&#x540e;&#x4f7f;&#x7528;&#x4e00;&#x4e2a;&#x56de;&#x8c03;&#xff08;callback&#xff09;&#x673a;&#x5236;&#x5728;&#x9002;&#x5f53;&#x7684;&#x65f6;&#x673a;&#x628a;&#x6307;&#x5411;&#xa;&#x539f;&#x6765;&#x6570;&#x636e;&#x7684;&#x6307;&#x9488;&#x91cd;&#x65b0;&#x6307;&#x5411;&#x65b0;&#x7684;&#x88ab;&#x4fee;&#x6539;&#x7684;&#x6570;&#x636e;">
<node CREATED="1349194618241" ID="ID_469153814" MODIFIED="1349194625112" TEXT="&#x65f6;&#x673a;">
<node CREATED="1349194634505" ID="ID_816655636" MODIFIED="1349194791343" TEXT="grace period&#xff1a;&#x7b49;&#x5f85;&#x9002;&#x5f53;&#x65f6;&#x673a;&#x7684;&#x8fd9;&#x4e00;&#x65f6;&#x671f;&#x79f0;&#x4e3a;grace period(&#x4f18;&#x60e0;&#x671f;&#xff0c;&#x5bbd;&#x9650;&#x671f;)"/>
<node CREATED="1349194729593" ID="ID_1712065980" MODIFIED="1349194800417" TEXT="quiescent state&#xff1a;CPU&#x53d1;&#x751f;&#x4e86;&#x4e0a;&#x4e0b;&#x6587;&#x5207;&#x6362;&#x79f0;&#x4e3a;&#x7ecf;&#x5386;&#x4e00;&#x4e2a;quiescent state"/>
<node CREATED="1349194699985" ID="ID_35946817" MODIFIED="1349262771264" TEXT="grace period&#xff1a;&#x5c31;&#x662f;&#x6240;&#x6709;CPU&#x90fd;&#x7ecf;&#x5386;&#x4e00;&#x6b21;quiescent state&#xa;&#xff08;&#x610f;&#x5473;&#x7740;&#x6240;&#x6709;&#x7684;&#x8bfb;&#x8005;&#x90fd;&#x8bfb;&#x5b8c;&#x4e86;&#xff0c;&#x56e0;&#x4e3a;&#x8bfb;&#x65f6;&#x4e0d;&#x53ef;&#x4ee5;&#x4e0a;&#x4e0b;&#x6587;&#x5207;&#x6362;&#xff09;&#xa;&#x6240;&#x9700;&#x8981;&#x7684;&#x7b49;&#x5f85;&#x7684;&#x65f6;&#x95f4;">
<node CREATED="1366735946905" ID="ID_1754620393" MODIFIED="1366735961917" TEXT="&#x8bfb;&#x8005;&#x5728;&#x6301;&#x6709;rcu_read_lock&#xff08;RCU&#x8bfb;&#x9501;&#x5b9a;&#x51fd;&#x6570;&#xff09;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x4e0d;&#x80fd;&#x53d1;&#x751f;&#x8fdb;&#x7a0b;&#x4e0a;&#x4e0b;&#x6587;&#x5207;&#x6362;&#xff0c;&#xa;&#x5426;&#x5219;&#xff0c;&#x56e0;&#x4e3a;&#x5199;&#x8005;&#x9700;&#x8981;&#x7b49;&#x5f85;&#x8bfb;&#x8005;&#x5b8c;&#x6210;&#x65b9;&#x53ef;&#x8fdb;&#x884c;&#xff0c;&#x5219;&#x6b64;&#x65f6;&#x5199;&#x8005;&#x8fdb;&#x7a0b;&#x4e5f;&#x4f1a;&#x4e00;&#x76f4;&#x88ab;&#x963b;&#x585e;&#xff0c;&#xa;&#x5f71;&#x54cd;&#x7cfb;&#x7edf;&#x7684;&#x6b63;&#x5e38;&#x8fd0;&#x884c;&#x3002;"/>
<node CREATED="1366735963553" ID="ID_431655428" MODIFIED="1366735976997" TEXT="&#x518d;&#x6b21;&#x5199;&#x8005;&#x6267;&#x884c;&#x5b8c;&#x6bd5;&#x540e;&#x9700;&#x8981;&#x8c03;&#x7528;&#x56de;&#x8c03;&#x51fd;&#x6570;&#xff0c;&#x6b64;&#x65f6;&#x53d1;&#x751f;&#x4e0a;&#x4e0b;&#x6587;&#x5207;&#x6362;&#xff0c;&#x5f53;&#x524d;&#x8fdb;&#x7a0b;&#x8fdb;&#x5165;&#x7761;&#x7720;&#xff0c;&#x5219;&#x7cfb;&#x7edf;&#x5c06;&#x4e00;&#x76f4;&#x4e0d;&#x80fd;&#x8c03;&#x7528;&#x56de;&#x8c03;&#x51fd;&#x6570;"/>
<node CREATED="1366735978665" ID="ID_244866135" MODIFIED="1366735986037" TEXT="&#x66f4;&#x69fd;&#x7cd5;&#x7684;&#x662f;&#xff0c;&#x6b64;&#x65f6;&#x5176;&#x5b83;&#x8fdb;&#x7a0b;&#x82e5;&#x518d;&#x53bb;&#x6267;&#x884c;&#x5171;&#x4eab;&#x7684;&#x4e34;&#x754c;&#x533a;&#xff0c;&#x5fc5;&#x7136;&#x9020;&#x6210;&#x4e00;&#x5b9a;&#x7684;&#x9519;&#x8bef;&#x3002;"/>
</node>
<node CREATED="1349193751895" ID="ID_524132132" MODIFIED="1349261855351" TEXT="&#x6240;&#x6709;&#x5f15;&#x7528;&#x8be5;&#x6570;&#x636e;&#x7684;CPU&#xa;&#x90fd;&#x9000;&#x51fa;&#x5bf9;&#x5171;&#x4eab;&#x6570;&#x636e;&#x7684;&#x64cd;&#x4f5c;"/>
</node>
<node CREATED="1349193897686" HGAP="22" ID="ID_543954359" MODIFIED="1349194878037" TEXT="&#x7f3a;&#x70b9;" VSHIFT="9">
<node CREATED="1349194172669" ID="ID_1578487891" MODIFIED="1349262266372" TEXT="&#x9501;&#x673a;&#x5236;">
<node CREATED="1349262268110" ID="ID_163589434" MODIFIED="1349262272844" TEXT="&#x5b83;&#x4e5f;&#x5fc5;&#x987b;&#x4f7f;&#x7528;&#x67d0;&#x79cd;&#x9501;&#x673a;&#x5236; &#xa;&#x540c;&#x6b65;&#x5e76;&#x884c;&#x7684;&#x5176;&#x5b83;&#x5199;&#x8005;&#x7684;&#x4fee;&#x6539;&#x64cd;&#x4f5c;"/>
</node>
<node CREATED="1349262237654" ID="ID_818875141" MODIFIED="1349262239231" TEXT="&#x5f00;&#x9500;">
<node CREATED="1349194193748" ID="ID_396117549" MODIFIED="1349194205754" TEXT="&#x5199;&#x8005;&#x7684;&#x540c;&#x6b65;&#x5f00;&#x9500;&#x6bd4;&#x8f83;&#x5927;&#xff1a;&#xa;&#x5b83;&#x9700;&#x8981;&#x5ef6;&#x8fdf;&#x6570;&#x636e;&#x7ed3;&#x6784;&#x7684;&#x91ca;&#x653e;&#xff0c;&#xa;&#x590d;&#x5236;&#x88ab;&#x4fee;&#x6539;&#x7684;&#x6570;&#x636e;&#x7ed3;&#x6784;"/>
</node>
</node>
</node>
</node>
<node CREATED="1349261794802" ID="ID_1546843304" MODIFIED="1349261797218" TEXT="&#x533a;&#x522b;">
<node CREATED="1349194284787" ID="ID_1786230215" MODIFIED="1349261919911" TEXT="&#x4e0e;rwlock&#x7684;&#x4e0d;&#x540c;" VSHIFT="-24">
<node CREATED="1349194420907" ID="ID_1733969133" MODIFIED="1349194426401" TEXT="&#x8bbf;&#x95ee;">
<node CREATED="1349194305436" ID="ID_1197871333" MODIFIED="1349194360114" TEXT="&#x5b83;&#x65e2;&#x5141;&#x8bb8;&#x591a;&#x4e2a;&#x8bfb;&#x8005;&#x540c;&#x65f6;&#x8bbf;&#x95ee;&#x88ab;&#x4fdd;&#x62a4;&#x7684;&#x6570;&#x636e;"/>
<node CREATED="1349194355211" ID="ID_801783794" MODIFIED="1349194356257" TEXT="&#x53c8;&#x5141;&#x8bb8;&#x591a;&#x4e2a;&#x8bfb;&#x8005;&#x548c;&#x591a;&#x4e2a;&#x5199;&#x8005;&#x540c;&#x65f6;&#x8bbf;&#x95ee;&#x88ab;&#x4fdd;&#x62a4;&#x7684;&#x6570;&#x636e;">
<node CREATED="1349194370595" ID="ID_279085502" MODIFIED="1349194379881" TEXT="&#x662f;&#x5426;&#x53ef;&#x4ee5;&#x6709;&#x591a;&#x4e2a;&#x5199;&#x8005;&#x5e76;&#x884c;&#x8bbf;&#x95ee;&#x53d6;&#x51b3;&#x4e8e;&#xa;&#x5199;&#x8005;&#x4e4b;&#x95f4;&#x4f7f;&#x7528;&#x7684;&#x540c;&#x6b65;&#x673a;&#x5236;"/>
</node>
</node>
</node>
<node CREATED="1349261909544" HGAP="23" ID="ID_822040610" MODIFIED="1349262367713" TEXT="&#x5b83;&#x662f;&#x6539;&#x8fdb;&#x7684;rwlock" VSHIFT="-12"/>
</node>
</node>
</node>
<node CREATED="1336532197197" ID="ID_791439475" MODIFIED="1349238334533" POSITION="left" TEXT="seqlock" VSHIFT="11">
<icon BUILTIN="idea"/>
<node CREATED="1349195185286" ID="ID_1426922456" MODIFIED="1349195186813" TEXT="&#x76ee;&#x7684;">
<node CREATED="1349195187941" ID="ID_1662280392" MODIFIED="1349195189958" TEXT="&#x5728;&#x8bfb;&#x8005;&#x64cd;&#x4f5c;&#x7279;&#x522b;&#x591a;&#x7684;&#x60c5;&#x51b5;&#x4e0b;&#xff0c;&#x907f;&#x514d;&#x5199;&#x64cd;&#x4f5c;&#x997f;&#x6b7b;"/>
</node>
<node CREATED="1349195225637" ID="ID_941690537" MODIFIED="1349195227180" TEXT="&#x5b9a;&#x4e49;">
<node CREATED="1349195228152" ID="ID_269250865" MODIFIED="1349195232721" TEXT="typedef struct {&#xa;&#x9;unsigned sequence;&#xa;&#x9;spinlock_t lock;&#xa;} seqlock_t;"/>
</node>
<node CREATED="1349195267110" ID="ID_730898825" MODIFIED="1349195269484" TEXT="&#x673a;&#x5236;">
<node CREATED="1349195270541" ID="ID_167482064" MODIFIED="1349273001677" TEXT="&#x8bfb;&#x8005;&#x4e0d;&#x4f1a;&#x963b;&#x585e;&#x5199;&#x8005;"/>
<node CREATED="1349195348444" ID="ID_829739674" MODIFIED="1349195411538" TEXT="(1) &#x8bfb;&#x8005;&#x5728;&#x5f97;&#x5230;&#x9501;&#x65f6;&#xff0c;&#x4f1a;&#x53d6;sequence&#x7684;&#x503c;&#xff0c;&#x5728;&#x5b83;&#x9000;&#x51fa;&#x65f6;&#xff0c;&#x4f1a;&#x68c0;&#x67e5;&#x5f53;&#x524d;sequence&#x7684;&#x503c;&#xa;&#x548c;&#x4e4b;&#x524d;&#x53d6;&#x5f97;&#x7684;sequence&#x503c;&#x662f;&#x5426;&#x4e00;&#x81f4;&#x3002;&#xa;(2) &#x5982;&#x679c;&#x4e0d;&#x4e00;&#x81f4;&#xff0c;&#x5219;&#x8bf4;&#x660e;&#x6709;&#x5199;&#x8005;&#x8fdb;&#x5165;&#x8fc7;&#x4e34;&#x754c;&#x533a;&#x3002;&#xa;(3) &#x8fd9;&#x79cd;&#x60c5;&#x51b5;&#x4e0b;&#xff0c;&#x8bfb;&#x8005;&#x4f1a;&#x91cd;&#x65b0;&#x83b7;&#x53d6;&#x9501;&#xff0c;&#x5e76;&#x91cd;&#x8bfb;&#x4e34;&#x754c;&#x533a;&#x7684;&#x503c;&#xff0c;&#x76f4;&#x5230;&#x4e24;&#x6b21;sequence&#x7684;&#x503c;&#x4e00;&#x81f4;&#x4e3a;&#x6b62;"/>
</node>
<node CREATED="1349195482411" ID="ID_77974235" MODIFIED="1349195484657" TEXT="&#x6ce8;&#x610f;">
<node CREATED="1349195485755" ID="ID_1709413086" MODIFIED="1349195496497" TEXT="&#x7528;seqlock&#x4fdd;&#x62a4;&#x7684;&#x4e34;&#x754c;&#x533a;&#x6216;&#x8005;&#x6570;&#x636e;&#x4e0d;&#x80fd;&#x6709;&#x5199;&#x6307;&#x9488;&#x7684;&#x64cd;&#x4f5c;&#x3002;&#xa;&#x56e0;&#x4e3a;&#xff0c;&#x5982;&#x679c;&#x5199;&#x8005;&#x4fee;&#x6539;&#x4e86;&#x6307;&#x9488;&#xff0c;&#x8bfb;&#x8005;&#x518d;&#x53bb;&#x8bfb;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x6709;&#x53ef;&#x80fd;&#x4f1a;&#x51fa;&#x73b0;&#x975e;&#x6cd5;&#x6307;&#x9488;&#x7684;&#x60c5;&#x51b5;">
<node CREATED="1366731590465" ID="ID_687369007" MODIFIED="1366731601991" TEXT="&#x8bfb;&#x8005;&#x548c;&#x5199;&#x8005;&#x5c5e;&#x4e8e;&#x4e0d;&#x540c;&#x7684;&#x8fdb;&#x7a0b;"/>
</node>
</node>
<node CREATED="1349195555747" ID="ID_1864358943" MODIFIED="1349195561296" TEXT="&#x7528;&#x6cd5;">
<node CREATED="1349195562290" ID="ID_1635384234" MODIFIED="1349195573544" TEXT="do {&#xa;&#x9;seq = read_seqbegin(&amp;foo);&#xa;&#x9;...&#xa;} while (read_seqretry(&amp;foo, seq));">
<node CREATED="1349195618891" ID="ID_637599903" MODIFIED="1349195648224" TEXT="static __always_inline int read_seqretry(const seqlock_t *sl, unsigned start)&#xa;{&#xa;&#x9;smp_rmb();&#xa;&#x9;return (sl-&gt;sequence != start);&#xa;}"/>
</node>
</node>
</node>
<node CREATED="1336532236584" HGAP="48" ID="ID_1539584256" MODIFIED="1366646121918" POSITION="left" TEXT="per-cpu" VSHIFT="507">
<icon BUILTIN="idea"/>
<node CREATED="1349234986119" ID="ID_1015086849" MODIFIED="1349234993358" TEXT="&#x76ee;&#x7684;">
<node CREATED="1349235006044" ID="ID_1918634381" MODIFIED="1349235023466" TEXT="&#x7528;&#x5728;&#x591a;&#x5904;&#x7406;&#x5668;&#x7cfb;&#x7edf;&#x4e2d;&#xff0c;&#x7528;&#x6765;&#x4e3a;&#x7cfb;&#x7edf;&#x4e2d;&#x7684;&#x6bcf;&#x4e2a;cpu&#x90fd;&#x751f;&#x6210;&#xa;&#x4e00;&#x4e2a;&#x53d8;&#x91cf;&#x7684;&#x526f;&#x672c;&#xff0c;&#x4ee5;&#x907f;&#x5f00;&#x591a;&#x5904;&#x7406;&#x5668;&#x4e92;&#x65a5;&#x4e2d;&#x7684;&#x52a0;&#x9501;&#x95ee;&#x9898;"/>
<node CREATED="1349235033683" ID="ID_1154250602" MODIFIED="1349235039482" TEXT="cpu&#x672c;&#x5730;&#x7684;&#x53d8;&#x91cf;&#x53ef;&#x4ee5;&#x5145;&#x5206;&#x5229;&#x7528;&#xa;cpu&#x7684;&#x786c;&#x4ef6;&#x7f13;&#x5b58;&#xff0c;&#x63d0;&#x9ad8;&#x6027;&#x80fd;"/>
</node>
<node CREATED="1349235190970" ID="ID_640649747" MODIFIED="1349235192889" TEXT="&#x533a;&#x522b;">
<node CREATED="1349235176650" ID="ID_1447173393" MODIFIED="1349235178746" TEXT="&#x4e0e;&#x666e;&#x901a;&#x53d8;&#x91cf;&#x7684;&#x4e3b;&#x8981;&#x533a;&#x522b;&#x662f;&#x653e;&#x5728;&#x4e00;&#x4e2a;&#x7279;&#x6b8a;&#x7684;section&#x91cc;">
<node CREATED="1352272213673" ID="ID_1793074397" MODIFIED="1352274238820">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="picture/per-cpu.jpg" />
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1349235128235" HGAP="36" ID="ID_182570927" MODIFIED="1349323600554" TEXT="API" VSHIFT="-83">
<node CREATED="1349235152323" ID="ID_1335038161" MODIFIED="1349235155347" TEXT="&#x9759;&#x6001;">
<node CREATED="1349235130795" ID="ID_1707040020" MODIFIED="1349235132555" TEXT="DEFINE_PER_CPU"/>
<node CREATED="1349235148771" ID="ID_743982345" MODIFIED="1349235149978" TEXT="DECLARE_PER_CPU"/>
</node>
</node>
<node CREATED="1366731930334" ID="ID_73378449" MODIFIED="1366731971867" TEXT="&#x9002;&#x7528;&#x60c5;&#x51b5;">
<node CREATED="1366731939261" ID="ID_1273757453" MODIFIED="1366731959107" TEXT=" per-cpu&#x53d8;&#x91cf;&#x53ea;&#x4e3a;&#x6765;&#x81ea;&#x4e0d;&#x540c;&#x5904;&#x7406;&#x5668;&#x7684;&#x5e76;&#x53d1;&#x8bbf;&#x95ee;&#x63d0;&#x4f9b;&#x4fdd;&#x62a4;&#xff0c;&#x5bf9;&#x6765;&#x81ea;&#x5f02;&#x6b65;&#x51fd;&#x6570;&#xa;&#xff08;&#x4e2d;&#x65ad;&#x5904;&#x7406;&#x7a0b;&#x5e8f;&#x548c;&#x53ef;&#x5ef6;&#x8fdf;&#x51fd;&#x6570;&#xff09;&#x7684;&#x8bbf;&#x95ee;&#xff0c;&#x4ee5;&#x53ca;&#x5185;&#x6838;&#x62a2;&#x5360;&#x5e76;&#x4e0d;&#x63d0;&#x4f9b;&#x4fdd;&#x62a4;&#xff0c;&#xa;&#x56e0;&#x6b64;&#x5728;&#x8fd9;&#x4e9b;&#x60c5;&#x51b5;&#x4e0b;&#x8fd8;&#x9700;&#x8981;&#x53e6;&#x5916;&#x7684;&#x540c;&#x6b65;&#x539f;&#x8bed;"/>
</node>
</node>
<node CREATED="1349235229906" HGAP="18" ID="ID_410453151" MODIFIED="1349238266358" POSITION="right" TEXT="&#x5185;&#x5b58;&#x5c4f;&#x969c;" VSHIFT="31">
<icon BUILTIN="idea"/>
<node CREATED="1349235341842" ID="ID_1269265489" MODIFIED="1349235343697" TEXT="&#x5b9a;&#x4e49;">
<node CREATED="1349235344977" ID="ID_1705640757" MODIFIED="1349235356832" TEXT="&#x7531;&#x4e8e;&#x7f16;&#x8bd1;&#x5668;&#x7684;&#x4f18;&#x5316;&#x548c;&#x7f13;&#x5b58;&#x7684;&#x4f7f;&#x7528;&#xff0c;&#x5bfc;&#x81f4;&#x5bf9;&#x5185;&#x5b58;&#x7684;&#x5199;&#x5165;&#x64cd;&#x4f5c;&#x4e0d;&#x80fd;&#x53ca;&#x65f6;&#x7684;&#x53cd;&#x5e94;&#x51fa;&#x6765;&#xff0c;&#xa;&#x4e5f;&#x5c31;&#x662f;&#x8bf4;&#x5f53;&#x5b8c;&#x6210;&#x5bf9;&#x5185;&#x5b58;&#x7684;&#x5199;&#x5165;&#x64cd;&#x4f5c;&#x4e4b;&#x540e;&#xff0c;&#x8bfb;&#x53d6;&#x51fa;&#x6765;&#x7684;&#x53ef;&#x80fd;&#x662f;&#x65e7;&#x7684;&#x5185;&#x5bb9;"/>
<node CREATED="1349235388810" ID="ID_312864459" MODIFIED="1349235399615" TEXT="&#x4e3a;&#x4e86;&#x9632;&#x6b62;&#x7f16;&#x8bd1;&#x5668;&#x548c;&#x786c;&#x4ef6;&#x7684;&#x4e0d;&#x6b63;&#x786e;&#x4f18;&#x5316;&#xff0c;&#x4f7f;&#x5f97;&#x5bf9;&#x5b58;&#x50a8;&#x5668;&#x7684;&#x8bbf;&#x95ee;&#x987a;&#x5e8f;&#xff08;&#x5176;&#x5b9e;&#x5c31;&#x662f;&#x53d8;&#x91cf;&#xff09;&#xa;&#x548c;&#x4e66;&#x5199;&#x7a0b;&#x5e8f;&#x65f6;&#x7684;&#x8bbf;&#x95ee;&#x987a;&#x5e8f;&#x4e0d;&#x4e00;&#x81f4;&#x800c;&#x63d0;&#x51fa;&#x7684;&#x4e00;&#x79cd;&#x89e3;&#x51b3;&#x529e;&#x6cd5;"/>
<node CREATED="1349235421208" ID="ID_472306247" MODIFIED="1349235424729" TEXT="&#x5b83;&#x4e0d;&#x662f;&#x4e00;&#x79cd;&#x9519;&#x8bef;&#x7684;&#x73b0;&#x8c61;&#xff0c;&#x800c;&#x662f;&#x4e00;&#x79cd;&#x5bf9;&#x9519;&#x8bef;&#x73b0;&#x8c61;&#x63d0;&#x51fa;&#x7684;&#x89e3;&#x51b3;&#x65b9;&#x6cd5;"/>
</node>
<node CREATED="1349235251898" ID="ID_1756119899" MODIFIED="1349235253913" TEXT="&#x5206;&#x7c7b;">
<node CREATED="1349235254938" ID="ID_468219394" MODIFIED="1349235285672" TEXT="&#x7f16;&#x8bd1;&#x5668;&#x5f15;&#x8d77;&#x7684;&#x5185;&#x5b58;&#x5c4f;&#x969c;&#xa;">
<node CREATED="1349235904933" ID="ID_144214544" MODIFIED="1349235912020" TEXT="&#x89e3;&#x51b3;&#x529e;&#x6cd5;">
<node CREATED="1349235913142" ID="ID_1184739022" MODIFIED="1349235915223" TEXT="volatile int flag = 0;"/>
</node>
<node CREATED="1349332382792" ID="ID_1623040449" MODIFIED="1349332392345" TEXT="&#x4e0d;&#x540c;&#x8bed;&#x8a00;&#x7684;&#x5904;&#x7406;&#x65b9;&#x6cd5;">
<node CREATED="1349332332464" ID="ID_873566312" MODIFIED="1349332353982" TEXT="C/C++&#x4e2d;&#x7684;volatile&#x5173;&#x952e;&#x5b57;&#x6ca1;&#x6709;&#x8c03;&#x7528;memory barrier&#xff0c;&#x800c;&#x53ea;&#x662f;&#x7981;&#x6b62;&#x7f16;&#x8bd1;&#x5668;&#x628a;&#x503c;&#x7f13;&#x5b58;&#x8d77;&#x6765;&#x7684;&#x4f18;&#x5316;"/>
<node CREATED="1349332355904" ID="ID_1921479063" MODIFIED="1349332363413" TEXT="&#x53ea;&#x6709;&#x5728;Java/C#&#x4ee5;&#x53ca;VS2005&#x5f00;&#x59cb;&#x5bf9;C++&#x7684;&#x6269;&#x5c55;&#x4e2d;volatile&#x7684;&#x5b9e;&#x73b0;&#x624d;&#x4f1a;&#x8c03;&#x7528;memory barrier"/>
<node CREATED="1349332365400" ID="ID_517168809" MODIFIED="1349332374005" TEXT="C++0x&#x4e2d;&#x6ca1;&#x6709;&#x91c7;&#x7528;&#x7c7b;&#x4f3c;&#x5b9a;&#x4e49;&#xff0c;&#x800c;&#x8f6c;&#x6210;&#x5728;atomic variables&#x4e2d;&#x8c03;&#x7528;memory barrier&#x6765;&#x4fdd;&#x8bc1;memory order"/>
</node>
<node CREATED="1349237071021" ID="ID_240130136" MODIFIED="1349237073341" TEXT="#define barrier() __asm__ __volatile__(&quot;&quot;: : :&quot;memory&quot;) "/>
</node>
<node CREATED="1349235287522" ID="ID_1463255906" MODIFIED="1349235298743" TEXT="&#x7f13;&#x5b58;&#x5f15;&#x8d77;&#x7684;&#x5185;&#x5b58;&#x5c4f;&#x969c;">
<node CREATED="1349236065708" ID="ID_1604275437" MODIFIED="1349236493073" TEXT="&#x5355;CPU">
<node CREATED="1349236071965" ID="ID_12897787" MODIFIED="1349236800645" TEXT="&#x4e0d;&#x4f1a;&#xff1a;&#xa;DMA&#x4fee;&#x6539;&#x5185;&#x5b58;&#xff0c;&#x5728;&#x73b0;&#x5728;&#x7684;&#x4f53;&#x7cfb;&#x7ed3;&#x6784;&#x4e2d;&#xff0c;&#xa;&#x4e0d;&#x4f1a;&#x5f15;&#x8d77;&#x5185;&#x5b58;&#x5c4f;&#x969c;&#x7684;&#x95ee;&#x9898;"/>
</node>
<node CREATED="1349236495153" ID="ID_1958759845" MODIFIED="1349236498856" TEXT="&#x591a;CPU">
<node CREATED="1349236521289" ID="ID_1419328485" MODIFIED="1349236814557" TEXT="&#x4f1a;&#xff1a;&#xa;&#x4f1a;&#x4ea7;&#x751f;cache&#x5f15;&#x8d77;&#x7684;&#x5185;&#x5b58;&#x5c4f;&#x969c;">
<node CREATED="1349332056011" ID="ID_934467517" MODIFIED="1349332068424" TEXT="&#x6bcf;&#x4e2a;CPU&#x90fd;&#x6709;&#x81ea;&#x5df1;&#x7684;cache&#xff0c;&#x5f53;&#x540c;&#x4e00;&#x4e2a;&#x5185;&#x5b58;&#x533a;&#x57df;&#x540c;&#x65f6;&#x5b58;&#x5728;&#x4e8e;&#x4e24;&#x4e2a;CPU&#x7684;cache&#x4e2d;&#x65f6;&#xff0c;&#xa;CPU1&#x6539;&#x53d8;&#x4e86;&#x81ea;&#x5df1;cache&#x4e2d;&#x7684;&#x503c;&#xff0c;&#x4f46;&#x662f;CPU2&#x5374;&#x4ecd;&#x7136;&#x5728;&#x81ea;&#x5df1;&#x7684;cache&#x4e2d;&#x8bfb;&#x53d6;&#x90a3;&#x4e2a;&#x65e7;&#x503c;"/>
</node>
<node CREATED="1349236757864" ID="ID_1265941289" MODIFIED="1349236764270" TEXT="&#x89e3;&#x51b3;&#x529e;&#x6cd5;">
<node CREATED="1349236765088" HGAP="36" ID="ID_1966713607" MODIFIED="1366735301852" TEXT="e.g. &#x5728;CPU2&#x8bfb;&#x53d6;&#x64cd;&#x4f5c;&#x4e4b;&#x524d;&#x4f7f;CPU1&#x7684;cache&#x5931;&#x6548;" VSHIFT="16"/>
<node CREATED="1349237095189" HGAP="33" ID="ID_77694864" MODIFIED="1366735298291" TEXT="mb() &#x9;&#x9002;&#x7528;&#x4e8e;&#x591a;&#x5904;&#x7406;&#x5668;&#x548c;&#x5355;&#x5904;&#x7406;&#x5668;&#x7684;&#x5185;&#x5b58;&#x5c4f;&#x969c;&#xa;rmb() &#x9;&#x9002;&#x7528;&#x4e8e;&#x591a;&#x5904;&#x7406;&#x5668;&#x548c;&#x5355;&#x5904;&#x7406;&#x5668;&#x7684;&#x8bfb;&#x5185;&#x5b58;&#x5c4f;&#x969c;&#xa;wmb() &#x9;&#x9002;&#x7528;&#x4e8e;&#x591a;&#x5904;&#x7406;&#x5668;&#x548c;&#x5355;&#x5904;&#x7406;&#x5668;&#x7684;&#x5199;&#x5185;&#x5b58;&#x5c4f;&#x969c;&#xa;smp_mb() &#x9;&#x9002;&#x7528;&#x4e8e;&#x591a;&#x5904;&#x7406;&#x5668;&#x7684;&#x5185;&#x5b58;&#x5c4f;&#x969c;&#xa;smp_rmb() &#x9;&#x9002;&#x7528;&#x4e8e;&#x591a;&#x5904;&#x7406;&#x5668;&#x7684;&#x8bfb;&#x5185;&#x5b58;&#x5c4f;&#x969c;&#xa;smp_wmb() &#x9;&#x9002;&#x7528;&#x4e8e;&#x591a;&#x5904;&#x7406;&#x5668;&#x7684;&#x5199;&#x5185;&#x5b58;&#x5c4f;&#x969c;&#x3002;" VSHIFT="34">
<node CREATED="1349237208517" ID="ID_1337325422" MODIFIED="1349237223826" TEXT="#ifdef CONFIG_X86_32&#xa;#define mb() alternative(&quot;lock; addl $0,0(%%esp)&quot;, &quot;mfence&quot;, X86_FEATURE_XMM2)&#xa;#define rmb() alternative(&quot;lock; addl $0,0(%%esp)&quot;, &quot;lfence&quot;, X86_FEATURE_XMM2)&#xa;#define wmb() alternative(&quot;lock; addl $0,0(%%esp)&quot;, &quot;sfence&quot;, X86_FEATURE_XMM)&#xa;#else&#xa;#define mb() &#x9;asm volatile(&quot;mfence&quot;:::&quot;memory&quot;)&#xa;#define rmb()&#x9;asm volatile(&quot;lfence&quot;:::&quot;memory&quot;)&#xa;#define wmb()&#x9;asm volatile(&quot;sfence&quot; ::: &quot;memory&quot;)&#xa;#endif"/>
</node>
</node>
</node>
</node>
<node CREATED="1349235301179" ID="ID_1483873921" MODIFIED="1349235306904" TEXT="&#x4e71;&#x5e8f;&#x6267;&#x884c;&#x5f15;&#x8d77;&#x7684;&#x5185;&#x5b58;&#x5c4f;&#x969c;">
<node CREATED="1349332153313" ID="ID_1781483818" MODIFIED="1349332164682" TEXT="&#x9002;&#x7528;&#x60c5;&#x51b5;">
<node CREATED="1349332147897" ID="ID_357175423" MODIFIED="1349332149896" TEXT="&#x8d85;&#x6807;&#x91cf;&#x5904;&#x7406;&#x5668;">
<node CREATED="1349332194697" ID="ID_811866816" MODIFIED="1349332204051" TEXT="&#x8d85;&#x6807;&#x91cf;&#x5b9e;&#x9645;&#x4e0a;&#x5c31;&#x662f;&#x4e00;&#x4e2a;CPU&#x62e5;&#x6709;&#x591a;&#x6761;&#x72ec;&#x7acb;&#x7684;&#x6d41;&#x6c34;&#x7ebf;&#xff0c;&#xa;&#x4e00;&#x6b21;&#x53ef;&#x4ee5;&#x53d1;&#x5c04;&#x591a;&#x6761;&#x6307;&#x4ee4;&#xff0c;&#x56e0;&#x6b64;&#xff0c;&#x5f88;&#x591a;&#x5141;&#x8bb8;&#x6307;&#x4ee4;&#x7684;&#x4e71;&#x5e8f;&#x6267;&#x884c;"/>
</node>
</node>
<node CREATED="1349236892335" ID="ID_1299741148" MODIFIED="1349236897100" TEXT="&#x89e3;&#x51b3;&#x529e;&#x6cd5;">
<node CREATED="1349236899670" ID="ID_1889859081" MODIFIED="1349236902030" TEXT="x86">
<node CREATED="1349236904078" ID="ID_952239720" MODIFIED="1349236943740" TEXT="x86&#x4e0a;&#x4e13;&#x95e8;&#x63d0;&#x4f9b;&#x4e86;lfence&#xff0c;sfence,&#x548c;mfence &#x6307;&#x4ee4;&#x6765;&#x505c;&#x6b62;&#x6d41;&#x6c34;&#x7ebf;&#xff1a;&#xa;lfence&#xff1a;&#x505c;&#x6b62;&#x76f8;&#x5173;&#x6d41;&#x6c34;&#x7ebf;&#xff0c;&#x76f4;&#x5230;lfence&#x4e4b;&#x524d;&#x5bf9;&#x5185;&#x5b58;&#x8fdb;&#x884c;&#x7684;&#x8bfb;&#x53d6;&#x64cd;&#x4f5c;&#x6307;&#x4ee4;&#x5168;&#x90e8;&#x5b8c;&#x6210;&#xa;sfence&#xff1a;&#x505c;&#x6b62;&#x76f8;&#x5173;&#x6d41;&#x6c34;&#x7ebf;&#xff0c;&#x76f4;&#x5230;lfence&#x4e4b;&#x524d;&#x5bf9;&#x5185;&#x5b58;&#x8fdb;&#x884c;&#x7684;&#x5199;&#x5165;&#x64cd;&#x4f5c;&#x6307;&#x4ee4;&#x5168;&#x90e8;&#x5b8c;&#x6210;&#xa;mfence&#xff1a;&#x505c;&#x6b62;&#x76f8;&#x5173;&#x6d41;&#x6c34;&#x7ebf;&#xff0c;&#x76f4;&#x5230;lfence&#x4e4b;&#x524d;&#x5bf9;&#x5185;&#x5b58;&#x8fdb;&#x884c;&#x7684;&#x8bfb;&#x5199;&#x64cd;&#x4f5c;&#x6307;&#x4ee4;&#x5168;&#x90e8;&#x5b8c;&#x6210;"/>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1336532211295" HGAP="19" ID="ID_785874796" MODIFIED="1349273113554" POSITION="left" TEXT="completion" VSHIFT="29">
<icon BUILTIN="idea"/>
<node CREATED="1349196483396" ID="ID_796206640" MODIFIED="1349196508252" TEXT="&#x673a;&#x5236;">
<node CREATED="1349196510212" ID="ID_721340173" MODIFIED="1349196511394" TEXT="&#x8f7b;&#x91cf;&#x7ea7;&#x7684;&#x673a;&#x5236;&#xff0c;&#x5b83;&#x5141;&#x8bb8;&#x4e00;&#x4e2a;&#x7ebf;&#x7a0b;&#x544a;&#x8bc9;&#x53e6;&#x4e00;&#x4e2a;&#x7ebf;&#x7a0b;&#x5de5;&#x4f5c;&#x5df2;&#x7ecf;&#x5b8c;&#x6210;"/>
</node>
<node CREATED="1349196599580" ID="ID_861217006" MODIFIED="1349196602329" TEXT="&#x5b9a;&#x4e49;">
<node CREATED="1349196603667" ID="ID_1652877145" MODIFIED="1349196611778" TEXT="struct completion {&#xa;&#x9;unsigned int done;&#xa;&#x9;wait_queue_head_t wait;&#xa;};"/>
</node>
<node CREATED="1349196523773" ID="ID_639641523" MODIFIED="1349196525219" TEXT="API">
<node CREATED="1349196526124" ID="ID_1952072455" MODIFIED="1349196552522" TEXT="&#x9759;&#x6001;&#x521b;&#x5efa;&#xff1a;&#xa;DECLARE_COMPLETION(my_completion);"/>
<node CREATED="1349281164508" HGAP="25" ID="ID_660699452" MODIFIED="1349281201994" TEXT="INIT_COMPLETION: - reinitialize a completion structure" VSHIFT="-34"/>
<node CREATED="1349196554596" ID="ID_999679590" MODIFIED="1349281181681" TEXT="&#x52a8;&#x6001;&#x521b;&#x5efa;&#xff1a;&#xa;struct compltion my_completion;&#xa;init_completion(&amp;my_completion);" VSHIFT="-17"/>
<node CREATED="1349196638003" ID="ID_445292841" MODIFIED="1349273218921" TEXT="&#x8981;&#x7b49;&#x5f85;completion&#xff1a;&#xa;void wait_for_completion(struct completion *c);"/>
<node CREATED="1349196655259" ID="ID_1625518503" MODIFIED="1366732013218" TEXT="&#x89e6;&#x53d1;completion&#x4e8b;&#x4ef6;&#xff1a;&#xa;void complete(struct completion *c);&#x9;// &#x5524;&#x9192;&#x4e00;&#x4e2a;&#x7b49;&#x5f85;&#x7ebf;&#x7a0b;&#xa;void complete_all(struct completion *c);&#x9;// &#x5524;&#x9192;&#x6240;&#x6709;&#x7684;&#x7b49;&#x5f85;&#x7ebf;&#x7a0b;"/>
</node>
</node>
<node CREATED="1349237354715" ID="ID_640065575" MODIFIED="1349238319916" POSITION="left" TEXT="BKL">
<icon BUILTIN="idea"/>
<node CREATED="1349237370203" ID="ID_1259051761" MODIFIED="1349237372715" TEXT="&#x73b0;&#x72b6;">
<node CREATED="1349237373683" ID="ID_1469917595" MODIFIED="1349237377826" TEXT="&#x88ab;&#x5185;&#x6838;&#x629b;&#x5f03;"/>
</node>
<node CREATED="1349334333946" ID="ID_732218693" MODIFIED="1349334336019" TEXT="&#x5386;&#x53f2;">
<node CREATED="1349334337161" ID="ID_225166013" MODIFIED="1349334338019" TEXT="introduced in Linux 2.0"/>
<node CREATED="1349334515393" ID="ID_1858911208" MODIFIED="1349334519498" TEXT="&#x6f14;&#x5316;">
<node CREATED="1349334486665" ID="ID_829938622" MODIFIED="1349334510990" TEXT="&#x4e3a;&#x6539;&#x5584;&#x6027;&#x80fd;&#xff0c;&#x4e4b;&#x540e;&#x7684;&#x5185;&#x6838;&#x6162;&#x6162;&#x5730;&#x5305;&#x542b;&#x4e86;&#x66f4;&#x7ec6;&#x7c92;&#x5ea6;&#x7684;&#x9501;&#x4ee5;&#x66ff;&#x4ee3;&#x8fd9;&#x4e2a;&#x5927;&#x5185;&#x6838;&#x9501;&#x3002;&#xa;&#x5728;&#x5185;&#x6838;&#x4e2d;&#x4e0d;&#x9f13;&#x52b1;&#x4f7f;&#x7528;BKL&#x3002;&#x4e8b;&#x5b9e;&#x4e0a;&#xff0c;&#x65b0;&#x4ee3;&#x7801;&#x4e2d;&#x4e0d;&#x518d;&#x4f7f;&#x7528;BKL&#x3002;&#xa;&#x8fd9;&#x6837;&#x6162;&#x6162;&#x5730;&#x7f29;&#x5c0f;BKL&#x7684;&#x4f7f;&#x7528;&#x8303;&#x56f4;&#xff0c;&#x7528;&#x5c0f;&#x9501;&#x63a5;&#x7ba1;&#x3002;&#xa;&#x901a;&#x8fc7;&#x4f7f;&#x7528;&#x5c0f;&#x9501;&#x6765;&#x4fdd;&#x62a4;&#x6bcf;&#x4e00;&#x4e2a;&#x5c0f;&#x7684;&#x4e34;&#x754c;&#x533a;&#xff08;&#x4f8b;&#x5982;&#x5355;&#x4e2a;&#x8bbe;&#x5907;&#xff09;&#xff0c;&#x6bd4;&#x5982;&#x4f7f;&#x7528;&#x81ea;&#x65cb;&#x9501;&#x548c;&#x4e92;&#x65a5;&#x4f53;&#x7b49;&#x7b49;"/>
</node>
</node>
<node CREATED="1349237387147" ID="ID_1500161007" MODIFIED="1349237388387" TEXT="&#x76ee;&#x7684;">
<node CREATED="1349237389283" ID="ID_334837052" MODIFIED="1349334420642" TEXT="&#x7528;&#x4e8e;&#x907f;&#x514d;&#x5728;SMP&#x7cfb;&#x7edf;&#x4e2d;&#x51fa;&#x73b0;&#x591a;&#x4e2a;&#x5904;&#x7406;&#x5668;&#x5e76;&#x884c;&#x5904;&#x7406;&#x4e34;&#x754c;&#x533a;(e.g. device)"/>
<node CREATED="1349237407947" ID="ID_815952003" MODIFIED="1349237413416" TEXT="&#x5f53;&#x521d;&#x7684;&#x76ee;&#x7684;&#x5e94;&#x8be5;&#x662f;&#x4e3a;&#x4e86;&#x7a33;&#x5b9a;&#x5730;&#x6e21;&#x8fc7;&#x65e9;&#x671f;Linux&#x652f;&#x6301;SMP&#x65f6;&#x7684;&#x8fc7;&#x6e21;&#x671f;&#xff0c;&#xa;&#x5728;&#x4fdd;&#x8bc1;&#x7a33;&#x5b9a;&#x7684;&#x57fa;&#x7840;&#x4e0a;&#x6162;&#x6162;&#x5730;&#x5411;&#x7ec6;&#x7c92;&#x5ea6;&#x9501;&#x8fc7;&#x6e21;"/>
</node>
<node CREATED="1349237476570" ID="ID_912152834" MODIFIED="1349237478450" TEXT="&#x7f3a;&#x70b9;">
<node CREATED="1349237479474" ID="ID_1213336397" MODIFIED="1349237504761" TEXT="&#x5b83;&#x662f;&#x4e00;&#x4e2a;&#x5168;&#x5c40;&#x7684;&#x5927;&#x9501;&#xff08;&#x6216;&#x8005;&#x8bf4;&#x4e00;&#x628a;&#x9501;&#x4fdd;&#x62a4;&#x4e00;&#x4e2a;&#x5f88;&#x5927;&#x7684;&#x4e34;&#x754c;&#x533a;&#xff09;&#xff0c;&#x53ea;&#x8981;&#x4e00;&#x4e2a;&#x5904;&#x7406;&#x5668;&#x8fdb;&#x5165;&#x4e86;&#x4e34;&#x754c;&#x533a;&#xff0c;&#xa;&#x52a0;&#x4e86;&#x9501;&#xff0c;&#x5176;&#x4ed6;&#x5904;&#x7406;&#x5668;&#x5c31;&#x8fdb;&#x4e0d;&#x4e86;&#x4e34;&#x754c;&#x533a;&#x3002;&#xa;&#x8fd9;&#x5bfc;&#x81f4;&#x4e86;SMP&#x7cfb;&#x7edf;&#x5728;&#x9677;&#x5165;&#x5185;&#x6838;&#x4e4b;&#x540e;&#x5c31;&#x597d;&#x50cf;&#x662f;&#x5355;&#x6838;&#x5904;&#x7406;&#x4e00;&#x6837;&#xff08;&#x8fd9;&#x5f7b;&#x5e95;&#x89e3;&#x51b3;&#x4e86;SMP&#x5728;&#x5185;&#x6838;&#x6001;&#x7684;&#x7ade;&#x6001;&#xff09;&#xff0c;&#xa;&#x51e0;&#x4e4e;&#x662f;&#x5728;&#x5e94;&#x7528;&#x5c42;&#x624d;&#x6709;&#x591a;&#x6838;&#x5e76;&#x884c;&#xff0c;&#x8fd9;&#x4e25;&#x91cd;&#x5236;&#x7ea6;&#x4e86;SMP&#x7684;&#x6027;&#x80fd;&#x3002;"/>
</node>
</node>
<node CREATED="1349238225773" ID="ID_894428215" MODIFIED="1349238257710" POSITION="right" TEXT="&#x539f;&#x5b50;&#x64cd;&#x4f5c;">
<icon BUILTIN="idea"/>
<node CREATED="1349333706174" ID="ID_191328933" MODIFIED="1349333708679" TEXT="&#x5b9a;&#x4e49;">
<node CREATED="1349333709550" ID="ID_878960801" MODIFIED="1349333710311" TEXT="&#x6700;&#x5c0f;&#x7684;&#x6267;&#x884c;&#x5355;&#x4f4d;"/>
<node CREATED="1349334011453" ID="ID_1823480145" MODIFIED="1349334016018" TEXT="typedef struct {&#xa;&#x9;volatile int counter;&#xa;} atomic_t;"/>
</node>
<node CREATED="1349334050196" ID="ID_79496626" MODIFIED="1349334051365" TEXT="API">
<node CREATED="1349334052468" ID="ID_861335731" MODIFIED="1349334231040" TEXT="atomic_read(atomic_t * v);&#xa;atomic_set(atomic_t * v, int i);&#xa;&#xa;void atomic_add(int i, atomic_t *v);&#xa;atomic_sub(int i, atomic_t *v);&#xa;int atomic_sub_and_test(int i, atomic_t *v);&#xa;&#xa;void atomic_inc(atomic_t *v);&#xa;int atomic_inc_and_test(atomic_t *v);&#xa;void atomic_dec(atomic_t *v);&#xa;int atomic_dec_and_test(atomic_t *v);&#xa;..."/>
</node>
<node CREATED="1349334262858" ID="ID_848092926" MODIFIED="1349334265420" TEXT="&#x7528;&#x9014;">
<node CREATED="1349334266226" ID="ID_709416880" MODIFIED="1349334267243" TEXT="&#x901a;&#x5e38;&#x7528;&#x4e8e;&#x5b9e;&#x73b0;&#x8d44;&#x6e90;&#x7684;&#x5f15;&#x7528;&#x8ba1;&#x6570;"/>
</node>
</node>
<node CREATED="1336532075322" HGAP="37" ID="ID_1400512058" MODIFIED="1351954953124" POSITION="right" TEXT="semaphore" VSHIFT="-36">
<icon BUILTIN="idea"/>
<node CREATED="1349188351870" ID="ID_701646021" MODIFIED="1349188356690" TEXT="&#x5b9a;&#x4e49;">
<node CREATED="1349188343510" ID="ID_1082770247" MODIFIED="1349188348700" TEXT="struct semaphore {&#xa;&#x9;spinlock_t&#x9;&#x9;lock;&#xa;&#x9;unsigned int&#x9;&#x9;count;&#xa;&#x9;struct list_head&#x9;wait_list;&#xa;};"/>
</node>
<node CREATED="1349188128887" ID="ID_400440285" MODIFIED="1349247965603" TEXT="&#x672c;&#x8d28;">
<node CREATED="1349247967072" ID="ID_1306163109" MODIFIED="1349247969834" TEXT="&#x4fe1;&#x53f7;&#x91cf;&#x5c31;&#x662f;&#x548c;&#x67d0;&#x4e2a;&#x8981;&#x4fdd;&#x62a4;&#x7684;&#x6570;&#x636e;&#x7ed3;&#x6784;&#x76f8;&#x5173;&#x8054;&#x7684;&#x8ba1;&#x6570;&#x5668;"/>
</node>
<node CREATED="1349186719409" ID="ID_1461826509" MODIFIED="1349186721079" TEXT="&#x7279;&#x70b9;">
<node CREATED="1349186565513" HGAP="35" ID="ID_965093260" MODIFIED="1349187249702" TEXT="&#x5f15;&#x8d77;&#x8c03;&#x7528;&#x8005;&#x7761;&#x7720;" VSHIFT="-8">
<icon BUILTIN="full-1"/>
</node>
<node CREATED="1349187169134" ID="ID_734690234" MODIFIED="1349249721358" TEXT="&#x5728;&#x4efb;&#x4f55;&#x65f6;&#x523b;&#xff0c;&#x6700;&#x591a;&#x53ea;&#x80fd;&#x6709;&#x4e00;&#x4e2a;&#x4fdd;&#x6301;&#x8005;">
<icon BUILTIN="full-2"/>
</node>
</node>
<node CREATED="1349186765816" ID="ID_1336559878" MODIFIED="1349186769762" TEXT="&#x9002;&#x7528;&#x60c5;&#x51b5;">
<node CREATED="1349186771257" ID="ID_1549405397" MODIFIED="1349187308085" TEXT="&#x4fe1;&#x53f7;&#x91cf;&#x9002;&#x5408;&#x4e8e;&#x4fdd;&#x6301;&#x65f6;&#x95f4;&#x8f83;&#x957f;&#x7684;&#x60c5;&#x51b5;&#xff0c;&#xa;&#x53ea;&#x80fd;&#x5728;&#x8fdb;&#x7a0b;&#x4e0a;&#x4e0b;&#x6587;&#x4f7f;&#x7528;">
<icon BUILTIN="full-3"/>
</node>
</node>
<node CREATED="1349188397782" ID="ID_1362139029" MODIFIED="1349188433475" TEXT="&#x539f;&#x5b50;&#x64cd;&#x4f5c;">
<node CREATED="1349188435493" ID="ID_1335433871" MODIFIED="1349247108367" TEXT="&#x83b7;&#x53d6;&#x4fe1;&#x53f7;&#x91cf;&#xff1a;down()">
<node CREATED="1349188969193" ID="ID_508544951" MODIFIED="1349188974824" TEXT="&#x4f1a;&#x5bfc;&#x81f4;&#x7761;&#x7720;"/>
</node>
<node CREATED="1349189056424" ID="ID_1290424136" MODIFIED="1349189073702" TEXT="down_trylock()&#xa;&#x4e0d;&#x4f1a;&#x5bfc;&#x81f4;&#x8c03;&#x7528;&#x8005;&#x7761;&#x7720;&#xff0c;&#x53ef;&#x4ee5;&#x5728;&#x4e2d;&#x65ad;&#x4e0a;&#x4e0b;&#x6587;&#x4f7f;&#x7528;"/>
<node CREATED="1349188996193" ID="ID_130055810" MODIFIED="1349189016060" TEXT="&#x53ef;&#x88ab;&#x4fe1;&#x53f7;&#x6253;&#x65ad;&#xff1a;&#xa;down_interruptible()"/>
<node CREATED="1349188441021" ID="ID_186000402" MODIFIED="1349247115702" TEXT="&#x91ca;&#x653e;&#x4fe1;&#x53f7;&#x91cf;&#xff1a;up()"/>
</node>
<node CREATED="1349247041927" ID="ID_1954829670" MODIFIED="1349247043392" TEXT="API">
<node CREATED="1349247044359" ID="ID_356190466" MODIFIED="1349247045599" TEXT="static inline void sema_init(struct semaphore *sem, int val)"/>
<node CREATED="1349247058279" ID="ID_221154672" MODIFIED="1349247059471" TEXT="#define init_MUTEX(sem)        sema_init(sem, 1)"/>
<node CREATED="1349247071559" ID="ID_1005812096" MODIFIED="1349247072599" TEXT="#define init_MUTEX_LOCKED(sem)    sema_init(sem, 0)"/>
</node>
<node CREATED="1354499900725" ID="ID_1712939889" MODIFIED="1354499904526" TEXT="&#x5206;&#x7c7b;">
<node CREATED="1354499908934" ID="ID_1213350246" MODIFIED="1354499917487" TEXT="binary semaphore">
<node CREATED="1354500001130" ID="ID_1011690788" MODIFIED="1354500006312" TEXT="&#x53ea;&#x5141;&#x8bb8;&#x4fe1;&#x53f7;&#x91cf;&#x53d6;0&#x6216;1&#x503c;&#xff0c;&#xa;&#x5176;&#x540c;&#x65f6;&#x53ea;&#x80fd;&#x88ab;&#x4e00;&#x4e2a;&#x7ebf;&#x7a0b;&#x83b7;&#x53d6;"/>
</node>
<node CREATED="1354499927155" ID="ID_594239547" MODIFIED="1354499927847" TEXT="integer semaphore">
<node CREATED="1354499934855" ID="ID_1515375377" MODIFIED="1354499948487" TEXT="&#x4fe1;&#x53f7;&#x91cf;&#x53d6;&#x503c;&#x662f;&#x6574;&#x6570;&#xff0c;&#x5b83;&#x53ef;&#x4ee5;&#x88ab;&#x591a;&#x4e2a;&#xa;&#x7ebf;&#x7a0b;&#x540c;&#x65f6;&#x83b7;&#x5f97;&#xff0c;&#x76f4;&#x5230;&#x4fe1;&#x53f7;&#x91cf;&#x7684;&#x503c;&#x53d8;&#x4e3a;0"/>
</node>
<node CREATED="1354499955775" ID="ID_1195048186" MODIFIED="1354499956457" TEXT="record semaphore">
<node CREATED="1354499979762" ID="ID_1390015991" MODIFIED="1354499991384" TEXT="&#x6bcf;&#x4e2a;&#x4fe1;&#x53f7;&#x91cf;s&#x9664;&#x4e00;&#x4e2a;&#x6574;&#x6570;&#x503c;value&#xff08;&#x8ba1;&#x6570;&#xff09;&#x5916;&#xff0c;&#x8fd8;&#x6709;&#x4e00;&#x4e2a;&#x7b49;&#x5f85;&#x961f;&#x5217;List&#xff0c;&#xa;&#x5176;&#x4e2d;&#x662f;&#x963b;&#x585e;&#x5728;&#x8be5;&#x4fe1;&#x53f7;&#x91cf;&#x7684;&#x5404;&#x4e2a;&#x7ebf;&#x7a0b;&#x7684;&#x6807;&#x8bc6;&#x3002;&#x5f53;&#x4fe1;&#x53f7;&#x91cf;&#x88ab;&#x91ca;&#x653e;&#x4e00;&#x4e2a;&#xff0c;&#xa;&#x503c;&#x88ab;&#x52a0;&#x4e00;&#x540e;&#xff0c;&#x7cfb;&#x7edf;&#x81ea;&#x52a8;&#x4ece;&#x7b49;&#x5f85;&#x961f;&#x5217;&#x4e2d;&#x5524;&#x9192;&#x4e00;&#x4e2a;&#x7b49;&#x5f85;&#x4e2d;&#x7684;&#x7ebf;&#x7a0b;&#xff0c;&#xa;&#x8ba9;&#x5176;&#x83b7;&#x5f97;&#x4fe1;&#x53f7;&#x91cf;&#xff0c;&#x540c;&#x65f6;&#x4fe1;&#x53f7;&#x91cf;&#x518d;&#x51cf;&#x4e00;"/>
</node>
</node>
</node>
<node CREATED="1349177486722" ID="ID_883876617" MODIFIED="1349238284894" POSITION="right" TEXT="mutex">
<icon BUILTIN="idea"/>
<node CREATED="1351954889223" HGAP="43" ID="ID_213888885" MODIFIED="1354500066375" TEXT="&#x548c;semaphore&#x7684;&#x533a;&#x522b;" VSHIFT="-15">
<node CREATED="1354500058928" ID="ID_1533033144" MODIFIED="1366734960548" TEXT="&#x4e92;&#x65a5;&#x91cf;&#x7528;&#x4e8e;&#x7ebf;&#x7a0b;&#x7684;&#x4e92;&#x65a5;&#xff0c;&#xa;&#x4fe1;&#x53f7;&#x91cf;&#x7528;&#x4e8e;&#x7ebf;&#x7a0b;&#x7684;&#x540c;&#x6b65;">
<node CREATED="1354500101149" ID="ID_1355579121" MODIFIED="1354500106278" TEXT="&#x8fd9;&#x662f;&#x4e92;&#x65a5;&#x91cf;&#x548c;&#x4fe1;&#x53f7;&#x91cf;&#x7684;&#x6839;&#x672c;&#x533a;&#x522b;&#xff0c;&#xa;&#x4e5f;&#x5c31;&#x662f;&#x4e92;&#x65a5;&#x548c;&#x540c;&#x6b65;&#x4e4b;&#x95f4;&#x7684;&#x533a;&#x522b;&#x3002;">
<node CREATED="1354500117861" ID="ID_851430496" MODIFIED="1354500119668" TEXT="&#x4e92;&#x65a5;">
<node CREATED="1354500123912" ID="ID_1874377919" MODIFIED="1354500144165" TEXT="&#x662f;&#x6307;&#x67d0;&#x4e00;&#x8d44;&#x6e90;&#x540c;&#x65f6;&#x53ea;&#x5141;&#x8bb8;&#x4e00;&#x4e2a;&#x8bbf;&#x95ee;&#x8005;&#x5bf9;&#x5176;&#x8fdb;&#x884c;&#x8bbf;&#x95ee;&#xff0c;&#xa;&#x5177;&#x6709;&#x552f;&#x4e00;&#x6027;&#x548c;&#x6392;&#x5b83;&#x6027;&#x3002;&#xa;&#x4f46;&#x4e92;&#x65a5;&#x65e0;&#x6cd5;&#x9650;&#x5236;&#x8bbf;&#x95ee;&#x8005;&#x5bf9;&#x8d44;&#x6e90;&#x7684;&#x8bbf;&#x95ee;&#x987a;&#x5e8f;&#xff0c;&#xa;&#x5373;&#x8bbf;&#x95ee;&#x662f;&#x65e0;&#x5e8f;&#x7684;"/>
</node>
<node CREATED="1354500157407" ID="ID_346749051" MODIFIED="1354500158997" TEXT="&#x540c;&#x6b65;">
<node CREATED="1354500160376" ID="ID_1403245429" MODIFIED="1354500166144" TEXT="&#x662f;&#x6307;&#x5728;&#x4e92;&#x65a5;&#x7684;&#x57fa;&#x7840;&#x4e0a;&#xff08;&#x5927;&#x591a;&#x6570;&#x60c5;&#x51b5;&#xff09;&#xff0c;&#xa;&#x901a;&#x8fc7;&#x5176;&#x5b83;&#x673a;&#x5236;&#x5b9e;&#x73b0;&#x8bbf;&#x95ee;&#x8005;&#x5bf9;&#x8d44;&#x6e90;&#x7684;&#x6709;&#x5e8f;&#x8bbf;&#x95ee;"/>
</node>
</node>
</node>
<node CREATED="1354500176973" ID="ID_1710985535" MODIFIED="1354500182578" TEXT="&#x4e92;&#x65a5;&#x91cf;&#x503c;&#x53ea;&#x80fd;&#x4e3a;0/1&#xff0c;&#xa;&#x4fe1;&#x53f7;&#x91cf;&#x503c;&#x53ef;&#x4ee5;&#x4e3a;&#x975e;&#x8d1f;&#x6574;&#x6570;">
<node CREATED="1354500192687" ID="ID_1873911641" MODIFIED="1354500199145" TEXT="&#x4e00;&#x4e2a;&#x4e92;&#x65a5;&#x91cf;&#x53ea;&#x80fd;&#x7528;&#x4e8e;&#x4e00;&#x4e2a;&#x8d44;&#x6e90;&#x7684;&#x4e92;&#x65a5;&#x8bbf;&#x95ee;&#xff0c;&#xa;&#x5b83;&#x4e0d;&#x80fd;&#x5b9e;&#x73b0;&#x591a;&#x4e2a;&#x8d44;&#x6e90;&#x7684;&#x591a;&#x7ebf;&#x7a0b;&#x4e92;&#x65a5;&#x95ee;&#x9898;"/>
<node CREATED="1354500218060" ID="ID_561064019" MODIFIED="1354500226753" TEXT="&#x4fe1;&#x53f7;&#x91cf;&#x53ef;&#x4ee5;&#x5b9e;&#x73b0;&#x591a;&#x4e2a;&#x540c;&#x7c7b;&#x8d44;&#x6e90;&#x7684;&#x591a;&#x7ebf;&#x7a0b;&#x4e92;&#x65a5;&#x548c;&#x540c;&#x6b65;&#x3002;&#xa;&#x5f53;&#x4fe1;&#x53f7;&#x91cf;&#x4e3a;&#x5355;&#x503c;&#x4fe1;&#x53f7;&#x91cf;&#x65f6;&#xff0c;&#x4e5f;&#x53ef;&#x4ee5;&#x5b8c;&#x6210;&#x4e00;&#x4e2a;&#x8d44;&#x6e90;&#x7684;&#x4e92;&#x65a5;&#x8bbf;&#x95ee;"/>
</node>
<node CREATED="1354500240005" HGAP="28" ID="ID_1101528010" MODIFIED="1366734998924" TEXT="&#x4e92;&#x65a5;&#x91cf;&#x7684;&#x52a0;&#x9501;&#x548c;&#x89e3;&#x9501;&#x5fc5;&#x987b;&#x7531;&#x540c;&#x4e00;&#x7ebf;&#x7a0b;&#x5206;&#x522b;&#x5bf9;&#x5e94;&#x4f7f;&#x7528;&#xff0c;&#xa;&#x4fe1;&#x53f7;&#x91cf;&#x53ef;&#x4ee5;&#x7531;&#x4e00;&#x4e2a;&#x7ebf;&#x7a0b;&#x91ca;&#x653e;&#xff0c;&#x53e6;&#x4e00;&#x4e2a;&#x7ebf;&#x7a0b;&#x5f97;&#x5230;" VSHIFT="16">
<node CREATED="1354500347698" HGAP="42" ID="ID_387217404" MODIFIED="1366734996174" TEXT="&#x7cfb;&#x7edf;&#x4e0d;&#x5141;&#x8bb8;&#x8fde;&#x7eed;&#x4e24;&#x6b21;&#x5bf9;Mutex&#x52a0;&#x9501;(&#x7cfb;&#x7edf;&#x4e00;&#x822c;&#x4f1a;&#x5728;&#x7b2c;&#x4e8c;&#x6b21;&#x8c03;&#x7528;&#x7acb;&#x523b;&#x8fd4;&#x56de;)&#x3002;&#xa;&#x4e5f;&#x5c31;&#x662f;&#x8bf4;&#xff0c;&#x52a0;&#x9501;&#x548c;&#x89e3;&#x9501;&#x8fd9;&#x4e24;&#x4e2a;&#x5bf9;&#x5e94;&#x7684;&#x64cd;&#x4f5c;&#xff0c;&#x9700;&#x8981;&#x5728;&#x540c;&#x4e00;&#x4e2a;&#x7ebf;&#x7a0b;&#x4e2d;&#x5b8c;&#x6210;" VSHIFT="14"/>
</node>
</node>
<node CREATED="1354500288562" ID="ID_192807918" MODIFIED="1354500290844" TEXT="use case">
<node CREATED="1354500291682" ID="ID_985342160" MODIFIED="1354500292694" TEXT="&#x5b83;&#x5e38;&#x7528;&#x4f5c;&#x4fdd;&#x62a4;&#x4ece;&#x4e2d;&#x65ad;&#x6765;&#x7684;&#x4e34;&#x754c;&#x6bb5;&#x4ee3;&#x7801;&#x5e76;&#x4e14;&#x5728;&#x5171;&#x4eab;&#x540c;&#x6b65;&#x4f7f;&#x7528;&#x7684;&#x8d44;&#x6e90;"/>
</node>
<node CREATED="1354500303732" ID="ID_605799552" MODIFIED="1354500307316" TEXT="&#x672c;&#x8d28;">
<node CREATED="1354500308224" ID="ID_374318548" MODIFIED="1354500316213" TEXT="Mutex&#x672c;&#x8d28;&#x4e0a;&#x8bf4;&#x5c31;&#x662f;&#x4e00;&#x628a;&#x9501;&#xff0c;&#x63d0;&#x4f9b;&#x5bf9;&#x8d44;&#x6e90;&#x7684;&#x72ec;&#x5360;&#x8bbf;&#x95ee;&#xff0c;&#xa;&#x6240;&#x4ee5;Mutex&#x4e3b;&#x8981;&#x7684;&#x4f5c;&#x7528;&#x662f;&#x7528;&#x4e8e;&#x4e92;&#x65a5;&#x3002;&#xa;Mutex&#x5bf9;&#x8c61;&#x7684;&#x503c;&#xff0c;&#x53ea;&#x6709;0&#x548c;1&#x4e24;&#x4e2a;&#x503c;"/>
</node>
</node>
</node>
</map>
